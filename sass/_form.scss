@charset "UTF-8";
@import "variables/settings";
@import "mixins/responsive-font-weight";
@import "compass/css3/user-interface";
@import "compass/css3/transition";
@import "compass/css3/transform";
@import "compass/css3/box-shadow";
@import "compass/css3/border-radius";
@import "compass/css3/appearance";

// form styles
input, textarea, select {
  color: $color-body-text;
  border: $border-width solid $color-shade;
  outline: none;
  @include transition(all .2s);

  // disabled
  &:disabled, &[readonly="readonly"] {
    color: $color-disabled-input;
    border-color: $color-disabled-input;
    @include input-placeholder {
      color: $color-disabled-input !important; // TODO: Remove this !important
    }
  }
  // disabled label style
  &:disabled+label, &[readonly="readonly"]+label {
    color: $color-disabled-input;
  }
}

input:not([type=checkbox]):not([type=radio]):not([type=range]),
textarea, select {
  @include input-placeholder {
    color: $color-placeholder;
  }
  font-family: inherit;
  @include responsive-body-font-weight;
  font-size: $large;
  background-color: transparent;
  line-height: $xlarge;
  padding: 0 0.618em;
  width: 100%;
}

input:not([type=checkbox]):not([type=radio]):not([type=range]),
textarea {
  // focused
  &:focus:not([readonly]) {
    border-color: transparent;
    background-color: $color-paper;
    @include box-shadow(0 1px 0 0 $color-body-text);
    &+label {
      @include transform(translateY(-100%));
      font-size: $medium;
      line-height: $large;
    }
  }
}

textarea {
  min-height: 3 * $xlarge;
  // auto-resize textarea
  &.auto-resize {
    overflow-y: hidden;
    resize: none;
  }
}

label {
  .active & {
    @include transform(translateY(-100%));
    font-size: $medium;
    line-height: $large;
  }
  font-size: $large;
  color: $color-placeholder;
  @include transition(all .3s);
  position: absolute;
  margin-left: 0.618 * $large;
  line-height: $xlarge;
  left: 0;
  .col *:not([type=checkbox]):not([type=radio]):not([type=range])+& {
    left: $gutter-width-px / 2 + $border-width;
  }
  *:not([type=checkbox]):not([type=radio]):not([type=range])+& {
    top: $border-width;
  }
}

.input-area {
  position: relative;
  margin-top: $large;
}

.hiddenfortextarea {
  display: none;
  //padding-top: (1em / 0.618); // TODO prevent jump?
  white-space: pre-wrap;
  -ms-word-wrap: break-word;
  word-wrap: break-word;
  overflow-wrap: break-word;
  font-size: $large;
  line-height: $xlarge;
}

// radio & checkbox
[type=radio], [type=checkbox] {
  @include appearance(none);
  width: $xlarge;
  height: $xlarge;
  position: absolute;
  margin: 0;
  visibility: hidden;

  &+label {
    cursor: pointer;
    position: relative;
    line-height: $xlarge;
    height: $xlarge;
    display: inline-block;
    @include user-select(none);

    &:before {
      content: '';
      position: absolute;
      top: 0;
      width: $xlarge - $border-width * 2;
      height: $xlarge - $border-width * 2;
      border: $border-width solid $color-shade;
      left: - 0.618 * $large;
    }
  }

  &:checked {
    border-color: transparent;
    +label {
      &:before {
        width: $xlarge - $border-width * 2 * 2;
        height: $xlarge - $border-width * 2 * 2;
        border: $border-width * 2 $color-checkbox-checked solid;
      }
    }
  }
}

// radio
[type=radio]+label:before {
  @include border-radius(50%);
}

// range
[type=range] {
  @include appearance(none);

  // Firefox fix
  width: 100%;
  margin-left: 0;
  margin-right: 0;
  border: 0;

  // slider thumb
  &::-webkit-slider-thumb {
    -webkit-appearance: none;
    height: $large - $border-width * 2;
    width: $large - $border-width * 2;
    -webkit-border-radius: 50%;
    border-radius: 50%;
    border: $border-width $color-body-text solid;
    cursor: pointer;
    -webkit-transition: all 0.3s;
    transition: all 0.3s;
    -webkit-transform: translateY(-($large - $border-width * 2) / 2);
    transform: translateY(-($large - $border-width * 2) / 2);
    &:hover, &:focus, &:active {
      height: $xlarge; // this is different from -moz numbers! border-width is absurdly omitted here
      width: $xlarge;
      -webkit-transform: translateY(-$xlarge / 2);
      transform: translateY(-$xlarge / 2);
    }
    &:focus {
      outline: none;
    }
  }

  &::-moz-range-thumb {
    height: $large - $border-width * 2;
    width: $large - $border-width * 2;
    -moz-border-radius: 50%;
    border-radius: 50%;
    border: $border-width $color-body-text solid;
    cursor: pointer;
    background-color: transparent;
    -moz-transition: all 0.3s;
    transition: all 0.3s; // no transition animation in browser tests, why?
    &:hover, &:focus, &:active {
      height: $xlarge - $border-width * 2; // this is different with -webkit numbers
      width: $xlarge - $border-width * 2;
    }
    &:focus {
      outline: none;
    }
  }

  &::-ms-thumb { // hover effects for IE has been removed for jumpy bugs
    height: $large - $border-width * 2;
    width: $large - $border-width * 2;
    border-radius: 50%;
    border: $border-width $color-body-text solid;
    cursor: pointer;
    background-color: transparent;
    -ms-transition: all 0.3s;
    transition: all 0.3s;
    &:focus {
      outline: none;
    }
  }

  // range slider track
  &::-webkit-slider-runnable-track {
    width: 100%;
    height: $border-width;
    cursor: pointer;
    background-color: $color-body-text;
  }

  &::-moz-range-track {
    width: 100%;
    height: $border-width;
    cursor: pointer;
    background-color: $color-body-text;
  }

  &::-ms-track {
    width: 100%;
    height: $xlarge;
    cursor: pointer;
    background: transparent;
    border: 0;
    color: transparent;
  }

  &::-ms-fill-lower {
    background: $color-body-text;
    height: $border-width;
  }

  &::-ms-fill-upper {
    background: $color-body-text;
    height: $border-width;
  }

  &:focus {
    outline: none;
  }
}
